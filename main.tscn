[gd_scene load_steps=22 format=3 uid="uid://wvuydjyfgoe"]

[ext_resource type="PackedScene" uid="uid://btknduttnmoxf" path="res://addons/godot-xr-tools/misc/vr_common_shader_cache.tscn" id="1_0xm2m"]
[ext_resource type="PackedScene" uid="uid://clc5dre31iskm" path="res://addons/godot-xr-tools/xr/start_xr.tscn" id="1_lquwl"]
[ext_resource type="PackedScene" uid="uid://diyu06cw06syv" path="res://addons/godot-xr-tools/player/player_body.tscn" id="2_h2yge"]
[ext_resource type="PackedScene" uid="uid://cjcehqrfoxav3" path="res://addons/hand_pose_detector/hands/LeftHandHumanoid.gltf" id="3_1bvp3"]
[ext_resource type="PackedScene" uid="uid://fiul51tsyoop" path="res://addons/godot-xr-tools/functions/function_teleport.tscn" id="4_4c57u"]
[ext_resource type="PackedScene" uid="uid://dabmoo0spa6vg" path="res://addons/hand_pose_detector/hands/RightHandHumanoid.gltf" id="4_lquwl"]
[ext_resource type="Script" uid="uid://dg4lbynmi8qey" path="res://addons/hand_pose_detector/hand_pose_controller.gd" id="5_7mycd"]
[ext_resource type="PackedScene" uid="uid://b4ysuy43poobf" path="res://addons/godot-xr-tools/functions/function_pickup.tscn" id="5_dg77c"]
[ext_resource type="Script" uid="uid://bwsl8u7uybb5c" path="res://addons/hand_pose_detector/hand_pose_action.gd" id="6_kek77"]
[ext_resource type="Resource" uid="uid://ra50ueubhepa" path="res://addons/hand_pose_detector/poses/point_thumb_up.tres" id="7_4c57u"]
[ext_resource type="Script" uid="uid://dhppxvui1etbk" path="res://addons/hand_pose_detector/hand_pose_action_map.gd" id="8_efxa6"]
[ext_resource type="Resource" uid="uid://dhbqusuodrl3r" path="res://addons/hand_pose_detector/poses/fist.tres" id="12_ycdy4"]
[ext_resource type="PackedScene" uid="uid://dqxeeyh87b1jm" path="res://scenes/gramophone_system.tscn" id="13_ycdy4"]

[sub_resource type="Resource" id="Resource_dg77c"]
script = ExtResource("6_kek77")
pose = ExtResource("7_4c57u")
action_type = 1
action_name = "teleport"
metadata/_custom_type_script = "uid://bwsl8u7uybb5c"

[sub_resource type="Resource" id="Resource_ycdy4"]
script = ExtResource("8_efxa6")
actions = Array[ExtResource("6_kek77")]([SubResource("Resource_dg77c")])
metadata/_custom_type_script = "uid://dhppxvui1etbk"

[sub_resource type="Resource" id="Resource_w48qg"]
script = ExtResource("6_kek77")
pose = ExtResource("12_ycdy4")
action_type = 1
action_name = "grip"
metadata/_custom_type_script = "uid://bwsl8u7uybb5c"

[sub_resource type="Resource" id="Resource_vivmo"]
script = ExtResource("8_efxa6")
actions = Array[ExtResource("6_kek77")]([SubResource("Resource_w48qg")])
metadata/_custom_type_script = "uid://dhppxvui1etbk"

[sub_resource type="WorldBoundaryShape3D" id="WorldBoundaryShape3D_7dm0k"]

[sub_resource type="PlaneMesh" id="PlaneMesh_1bvp3"]
size = Vector2(10, 7)

[sub_resource type="BoxMesh" id="BoxMesh_ycdy4"]
size = Vector3(3, 3, 0.1)

[sub_resource type="BoxShape3D" id="BoxShape3D_ycdy4"]
size = Vector3(3, 3, 0.1)

[node name="Node3D" type="Node3D"]

[node name="StartXR" parent="." instance=ExtResource("1_lquwl")]

[node name="DirectionalLight3D" type="DirectionalLight3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 0.5308662, 0.8474556, 0, -0.8474556, 0.5308662, 0, 0, 0)

[node name="XROrigin3D" type="XROrigin3D" parent="."]

[node name="XRCamera3D" type="XRCamera3D" parent="XROrigin3D"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 2, 0)

[node name="VRCommonShaderCache" parent="XROrigin3D/XRCamera3D" instance=ExtResource("1_0xm2m")]

[node name="PlayerBody" parent="XROrigin3D" instance=ExtResource("2_h2yge")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 1, 0)

[node name="LeftVirtualController" type="XRController3D" parent="XROrigin3D"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -0.3, 1, 0)
tracker = &"/user/hand_pose_controller/left"

[node name="FunctionTeleport" parent="XROrigin3D/LeftVirtualController" instance=ExtResource("4_4c57u")]
teleport_button_action = "teleport"

[node name="RightVirtualController" type="XRController3D" parent="XROrigin3D"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0.3, 1, 0)
tracker = &"/user/hand_pose_controller/right"

[node name="FunctionPickup" parent="XROrigin3D/RightVirtualController" instance=ExtResource("5_dg77c")]
grab_distance = 0.1
ranged_enable = false

[node name="LeftTrackedHand" type="XRNode3D" parent="XROrigin3D"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -0.3, 1, 0)
tracker = &"/user/hand_tracker/left"

[node name="LeftHandHumanoid2" parent="XROrigin3D/LeftTrackedHand" instance=ExtResource("3_1bvp3")]

[node name="XRHandModifier3D" type="XRHandModifier3D" parent="XROrigin3D/LeftTrackedHand/LeftHandHumanoid2/LeftHandHumanoid/Skeleton3D" index="1"]

[node name="HandPoseController" type="Node" parent="XROrigin3D/LeftTrackedHand"]
script = ExtResource("5_7mycd")
controller_pose_type = 1
controller_action_map = SubResource("Resource_ycdy4")

[node name="RightTrackedHand" type="XRNode3D" parent="XROrigin3D"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0.3, 1, 0)
tracker = &"/user/hand_tracker/right"

[node name="RightHandHumanoid2" parent="XROrigin3D/RightTrackedHand" instance=ExtResource("4_lquwl")]

[node name="XRHandModifier3D" type="XRHandModifier3D" parent="XROrigin3D/RightTrackedHand/RightHandHumanoid2/RightHandHumanoid/Skeleton3D" index="1"]
hand_tracker = &"/user/hand_tracker/right"

[node name="HandPoseController" type="Node" parent="XROrigin3D/RightTrackedHand"]
script = ExtResource("5_7mycd")
controller_tracker_name = "/user/hand_pose_controller/right"
controller_pose_type = 1
controller_action_map = SubResource("Resource_vivmo")
hand_tracker_name = "/user/hand_tracker/right"

[node name="GramophoneSystem" parent="." instance=ExtResource("13_ycdy4")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -1.2783272, 1, -1.9499061)

[node name="Environment" type="Node3D" parent="."]

[node name="Floor" type="StaticBody3D" parent="Environment"]

[node name="CollisionShape3D" type="CollisionShape3D" parent="Environment/Floor"]
shape = SubResource("WorldBoundaryShape3D_7dm0k")

[node name="MeshInstance3D" type="MeshInstance3D" parent="Environment/Floor"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 2.5, 0, 1)
mesh = SubResource("PlaneMesh_1bvp3")

[node name="Wall" type="StaticBody3D" parent="Environment"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -1, 0, -2.45)

[node name="MeshInstance3D" type="MeshInstance3D" parent="Environment/Wall"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 1.5, 0)
mesh = SubResource("BoxMesh_ycdy4")

[node name="CollisionShape3D" type="CollisionShape3D" parent="Environment/Wall"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 1.5, 0)
shape = SubResource("BoxShape3D_ycdy4")

[node name="Wall2" type="StaticBody3D" parent="Environment"]
transform = Transform3D(-4.371139e-08, 0, 1, 0, 1, 0, -1, 0, -4.371139e-08, -2.5, 0, -0.95000005)

[node name="MeshInstance3D" type="MeshInstance3D" parent="Environment/Wall2"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 1.5, 0)
mesh = SubResource("BoxMesh_ycdy4")

[node name="CollisionShape3D" type="CollisionShape3D" parent="Environment/Wall2"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 1.5, 0)
shape = SubResource("BoxShape3D_ycdy4")

[editable path="XROrigin3D/LeftTrackedHand/LeftHandHumanoid2"]
[editable path="XROrigin3D/RightTrackedHand/RightHandHumanoid2"]
